workplace = """
    In workplace conversations, showing emotional intelligence is equally important. Below are key points to consider when communicating:

    Considerate Preamble: Start conversations with a considerate preamble such as, "I'm sorry to bother you" or "Are you busy right now?" This can immediately change the impression you give and show that you're thoughtful, humble, and understanding. For example:

    "Sorry, I know you're busy, but I need your help to make some copies."
    Lead with Conclusions: In professional settings, people often prefer to hear conclusions first. Following a structure like "Conclusion → Reason → Example → Conclusion → Future Outlook" helps others quickly understand and accept your point. For example:

    Junior: "I took the iPad to the client, and we closed the deal fast!" (Conclusion)
    Senior: "Really? How did the iPad help close the deal?"
    Junior: "Because we were able to show them our company’s website right there." (Reason)
    Senior: "Oh, the website?"
    Junior: "Yes, especially the product animations. The client loved it and signed the contract on the spot." (Example)
    Senior: "Wow, impressive. Should I get an iPad too?"
    Junior: "You don’t need it. You’re already the top professional in the industry!" (Future Outlook)
    Phone and Chat Etiquette: Be extra polite in phone calls or chats, especially in the first 20 seconds. Follow these four steps: apologize for the interruption, introduce yourself, get to the point, and ask if it’s a good time. For example:

    "Sorry for the interruption."
    "This is [Your Name] from [Company]."
    "I’m calling regarding the lunch meeting next week."
    "Do you have a few minutes to discuss this?"
    Use "Of Course" and "I Understand": To address objections and show empathy, phrases like "I understand" or "Of course" can demonstrate calmness and objectivity, making it easier for your point to be accepted. For example:

    "Of course, quitting smoking is hard, I know from personal experience. It took me three years to quit, but the health risks have been well-publicized. Now is a great time to make that commitment."
"""

daily = """
    In everyday chats, showing emotional intelligence via messaging can help strengthen relationships. Here are some points to keep in mind:

    Expand the Topic: Avoid sticking to just one topic. Try to expand the conversation by asking for details or sharing your own experiences. For example:

    "Where do you live?" "I live in Koshigaya."
    "How do you get to Koshigaya City?"
    "Funny you mention Koshigaya, I visited Lake Town there last month."
    Add More to Your Replies: Try not to respond with just “yes” or “no.” Add something to keep the conversation going. For example:

    "Yes, I biked here. I’ve gained a few pounds recently, so I need the exercise."
    "Yes, I biked here. The weather was just perfect today!"
    Share Your Own Experiences: Responding with personal experiences helps build rapport. For example:

    A: "The forecast says we might get a thunderstorm this afternoon. I brought my foldable umbrella."
    B: "I think foldable umbrellas are great! I lost my long umbrella on the train the other day."
    Use 5W1H (Who, What, When, Where, Why, How): Even if the other person isn’t chatty, asking questions using 5W1H can help keep the conversation going.

    A: "I got robbed last week."
    B: "Oh no! When did that happen?" (When)
    A: "Last Sunday."
    B: "What did they take?" (What)
    Show Agreement and Interest: Actively show that you’re listening by echoing their words and agreeing. For example:

    A: "I’d love to spend a year in Paris."
    B: "Wow, Paris? That sounds amazing! What made you choose Paris?"
    Parrot Technique: Repeat part of what they said to show that you’re paying attention. For example:

    "Where did you go on vacation?"
    "My wife and I went to Kyoto."
    "Kyoto, huh?"
    Emotional Synchrony: Match your tone and reaction to the other person's emotions. For example:

    "I’m planning to go to Disneyland this weekend!" (Excited)
    "My mom is sick, so I’m heading home to take care of her." (Concerned)
    Small Talk Tactics: Small talk can ease tension and avoid making the other person feel pressured. Avoid personal questions and stick to broad or general topics. For example:

    "Starbucks coffee costs more than $5 a cup, it’s definitely a luxury!"
    "Instant coffee at the office works for me, but the atmosphere at Starbucks is nice."
    Common Interests: Find similarities to build a connection. For example:

    "What kind of music did you like in school?"
    "I loved listening to Green Day. I was a huge fan back in college."
    Food Topics: Food is a universally easy conversation starter. For example:

    "Do you like spicy food?"
    "I love spicy food! There’s a great new ramen place in town that serves extra-spicy bowls."
    Avoid Controversial Topics: Avoid discussing topics like religion, politics, race, or ideology to keep the conversation comfortable.

    Sympathy When Listening to Complaints: If someone is complaining, listen without denying or defending the target of their complaint. Just nod and listen attentively.

    Be Honest About Yourself: Sharing your quirks and characteristics can help people feel more at ease and lower their guard. For example:

    "I might seem confident, but I actually get nervous in large groups."
    Provide Useful Information: Offering helpful information makes conversations feel more rewarding for the other person. For example:

    "If you check out this website, you can find high-end hotels for a good price."
    Storytelling: Treat conversations like storytelling. Adding vivid details makes it more engaging. For example:

    "It took our chef five years to create this dessert to match the exact taste he experienced in France."
    Self-Deprecation: Sharing funny or embarrassing personal stories makes you more relatable. For example:

    "I missed the last train home last night and ended up back at the station—what an anti-climactic journey!"
    Offer Encouragement: Before speaking, think of the other person's situation. For example:

    "Are you okay? You’ve already done your best."
"""

scene_data = {
    "workplace-assigning tasks": """
        Considerate Intro: Start the conversation with a considerate introduction like "I'm sorry to bother you" or "Are you busy?", which can instantly change the other person's impression, showing care, humility, and understanding. For example:
        "Sorry to bother you, are you busy? But I have to trouble you to make some copies."

""",
    "workplace-persuation": """
        Use phrases like "of course" or "indeed": Acknowledge the opponent's feelings by using phrases like "indeed" or "of course" to show you understand their point of view, which demonstrates calmness and objectivity, increasing the chance that your opinion will be accepted. For example:
        "Indeed, I completely understand how difficult it is to quit smoking. I also failed several times and took three years to quit. But the risk of lung cancer has been widely advertised, so smokers should be more determined to quit!"
""",
    "workplace-general": """
            State the conclusion first: In business settings, people prefer hearing the conclusion first. Following the flow of "Conclusion → Reason → Specific example → Conclusion → Future vision" helps make your point clearer and easier to accept. For example:
            Junior: "I brought the iPad to the client, and the deal closed quickly!" (Conclusion)
            Senior: "Oh really? Why did the iPad help close the deal?"
            Junior: "Because we could show the company website immediately." (Reason)
            Senior: "The website?"
            Junior: "Yes, especially the product animations. Yesterday, when I showed the client the product animations on our website, they were so impressed and signed the contract on the spot." (Specific example)
            Senior: "Wow, that's great. Should I also buy an iPad?"
            Junior: "You could definitely close deals without it. You are an outstanding senior salesperson, admired as the best in the industry, right?" (Conclusion and Future vision)

            Telephone and chat etiquette: Be extra polite on the phone or in chats, especially in the first 20 seconds. Follow these four key points: apologize, introduce yourself, directly convey the main point, and ask if it’s convenient to continue. For example:
            "Sorry to disturb you."
            "I’m [Name] from [Company]."
            "I’m calling regarding next week’s lunch meeting."
            "Can I take up five minutes of your time?"

            When facing conflict, it's best to avoid engaging in too much argument with the other person. Ideally, don’t give them the opportunity to counter your points. Ending the conversation quickly is more important.
""",
    "daily-Opening and Continuing Conversations": """
        Respond appropriately: Show that you are actively listening by responding during the other person’s speech. For example:
        A: "Do you have any dreams for the future?"
        B: "I hope to live in Paris for a year!"
        A: "Hmm, hmm! That sounds amazing! Why did you choose Paris?"

        Parrot technique: Repeat what the other person said to show understanding. For example:
        "Where did you go for vacation?"
        "I went to Kyoto with my wife."
        "Kyoto?"

        Small talk: Small talk can ease tension without putting pressure on the other person. Avoid personal questions and choose broad or varied topics. For example:
        "A cup of coffee at Starbucks costs over 500 yen, it's a luxury."
        "Instant coffee from the office is satisfying enough, but Starbucks really has a great atmosphere!"

        Go-to topics: Remember the eight topics "Work, Weather, Seasons, Health, News, Art, Street, Transportation" to quickly start a conversation. For example:
        "You seem really busy!" (Work)
        "The weather is so hot, it's almost like heatstroke!" (Weather)
        "I’m going cherry blossom viewing this weekend!" (Season)

        Law of similarity: Find "similar points" between you and the other person in conversation to build rapport. For example:
        "What kind of music did you like in school?"
        "I liked GLAY. I was a huge fan during my college years."

        Food topics: Food is an easy topic to talk about and helps you engage in light conversation. For example:
        "Can you handle spicy food?"
        "I love spicy food! There's a great spicy ramen shop in Shinjuku."

        Talk about their strengths: Find out the other person’s hobbies or expertise and let them talk; they won’t get tired of the conversation. For example:
        "That camera looks great! Is it a [brand] DSLR?"
        "You know your stuff! It’s a new model, but it's easy to operate!"

        Emotion matching: Adjust your responses based on the other person’s emotions. For example:
        "You became a store manager after only two years in the company, that's amazing!"
        "Thank you, but there are a lot of internal issues."
        "Oh, that sounds tough. But hitting rock bottom isn't all bad; from here, you can only go up."

        Taboo topics: Avoid talking about "religion," "politics," "race," and "ideology."

""",
    "daily-Showing Empathy / Steering the Conversation": """
        Expand the topic: Avoid one-topic conversations by asking for more details or sharing your own experiences to broaden the conversation. For example:
        "Where do you live?" "I live in Koshigaya, Saitama."
        "What kind of train do you take to get to Koshigaya?"
        "You said Koshigaya? I went to Lake Town in Koshigaya last month."

        Add a sentence: Try not to answer with just "yes" or "no." Add a sentence after your response to allow the other person to continue the conversation. For example:
        "Yes, I biked here. I've gained 6 pounds recently from lack of exercise."
        "Yes, I biked here. The weather was just so nice!"

        Share experiences: Respond with your own experiences to make it easier for others to open up. For example:
        A: "The weather forecast says there might be thunderstorms this afternoon, so I brought my folding umbrella."
        B: "Speaking of umbrellas, I think folding ones are better. I left my long umbrella on the train the other day."

        Use the "5W1H" method: Even if the other person isn't good at conversing, use the "5W1H" (Who, What, When, Where, Why, How) to prompt more conversation. For example:
        "I was robbed the other day..."
        "Oh no! When did it happen?" (When)
        "Last Sunday."
        "What did they steal?" (What)
        "My bag was stolen, and inside it was my wallet and a notebook."

        Listening to complaints: When listening to someone complain, don’t deny, criticize, or take sides. Just acknowledge with a few "mm-hmm"s and move on.
""",
    "daily-general": """
        Be honest about yourself: Being upfront about your personality and characteristics can make others feel more relaxed and less defensive. For example:
        "Although I may seem carefree, I’m actually very timid and get nervous around crowds."

        Self-labeling: Label yourself with specific traits to make it easier for others to remember you. For example:
        "I drink one liter of acai berry juice every morning."

        Simplify jargon: When discussing work, use simple, easy-to-understand language, avoiding jargon. For example:
        "SEO stands for Search Engine Optimization."

        Admit your flaws: Acknowledging your flaws can make others like you more. For example:
        "I don’t really have any hobbies, so I just drink a little beer when I’m bored."

        Offer useful information: Provide the other person with helpful information so they feel like they gained something from the conversation. For example:
        "You can find cheap yet luxurious hotels on [website]."

""",
    "daily-fitting into groups": """
        Storytelling: Treat conversations like telling a story; vivid imagery makes it more engaging. For example:
        "The chef spent five years perfecting this dessert to recreate the feeling he had when he first tasted it in Paris."

        Exaggerated Metaphor: Develop your sense of humor by using exaggerated comparisons. For example:
        "My day was like being stuck in rush hour traffic, but on a Monday morning and without coffee."

        Positive Statement Method: Express opinions in a positive way to increase likability. For example:
        "Should we brainstorm some other ideas? I’m sure we can find a solution that works."

        Sharing Embarrassing Stories: Share your own embarrassing stories to make others feel closer to you. For example:
        "I missed my stop on the subway yesterday and ended up riding all the way back home. It was a round trip, but not the fun kind."

        Consideration for Others: Think about the other person before speaking to increase your charm. For example:
        "Are you okay?" "What happened?" "You really gave it your best."

        Sharing Dreams: Frequently talk about your dreams, which can create resonance and support. For example:
        "In a couple of years, I want to open my own café in New York. I’m taking barista classes to prepare for it."

""",
    "daily-warming up the atmosphere": """
       'What If' Questions to Reveal True Feelings:
        Asking hypothetical questions like "If you won the lottery, how would you spend the money?" encourages the other person to share deeper thoughts, revealing their values.

        Unanswerable Questions to Liven the Atmosphere:
        Asking questions without definite answers, like "How could we move the Rocky Mountains?" can spark curiosity and energize the conversation.

        'Closed + Open' Questions for Endless Conversations:
        Start with a closed question to confirm interest, then follow up with an open question to go deeper. For example:
        "Do you like desserts?" Then ask, "What’s your favorite dessert lately?"

        Helping to Organize the Conversation:
        When someone’s story becomes unclear, help by summarizing their key points. For example:
        "So, you're working on a project related to music production?" This helps the other person keep talking.

        Using Transition Phrases like 'Speaking of…' to Change Topics:
        Use transition phrases like "Speaking of which..." to shift topics smoothly and naturally, avoiding interruptions.

        Use Keywords from the Other Person to Steer the Conversation:
        For example: "Speaking of wine, I remember you said you're into craft beer. Have you tried any new brews recently?"

        Talk About Topics that Make the Other Person Feel Happy or Proud:
        For example, asking a newly engaged couple about their proposal story will usually get them talking with excitement.
        Example:
        A: "You’re always so focused on your work."
        B: "Writing code is actually really fun for me."
        A: "What got you interested in programming in the first place?"
        B: "It started as a hobby, but then I realized I was pretty good at it."

        Men Like Their Abilities Recognized, Women Like to Feel Appreciated:
        For example, to a man: "You're someone I can really rely on." To a woman: "Thank you, it’s so nice to have you here."

""",
    "daily-asking questions": """
        Stimulating the Other Person’s Willingness to Help:
        When asking for advice or information, explain your specific need and purpose. This encourages the other person to provide more helpful responses. Example:
        Instead of asking, "Is there a good Italian restaurant in Manhattan?" Ask:
        "I haven’t seen my mom in three years, and she’s visiting next week. I’d love to take her out for her favorite Italian food. Do you know a good spot in Manhattan?"

        Narrow and Specific Questions Get More Practical Answers:
        For example:
        Instead of asking, "How can I be more popular?" Ask:
        "If I see someone carrying heavy groceries, what’s a nice way to offer help?"

        Admit When You Don’t Understand:
        If you don’t understand something, it’s better to admit it. This encourages the other person to explain in more detail. Example:
        If the other person mentions "MVP in basketball," say:
        "MVP? What does that stand for?"

        Timely Response and Gratitude for Shared Information:
        Show appreciation for any useful information. This encourages the person to keep helping in the future. Example:
        "I went to that massage place you recommended yesterday. Thanks to you, my back feels so much better!"

""",
}


stage1_prompt = """
            # Role
            You are an expert in information organization and emotional analysis, skilled at handling complex dialogue analysis, especially in workplace interpersonal relationships. You can infer the relationship and intentions of both parties based on the dialogue content and conduct emotional and content analysis according to the dialogue context.

            # Task
            【Goal】From a segment of dialogue, you need to:
            1. Analyze the scene in which the conversation occurs, defining it by choosing from the following options: "daily","workplace"
            2. Analyze the relationship between the parties and provide a brief description, such as “Colleagues,” “Supervisor and Subordinate,” “Friends,” etc. Infer the interaction pattern based on the tone and content of the dialogue.
            3. Conduct an emotional and intent analysis of the conversation content. Pay particular attention to the other person's intentions and the user's potential emotional responses. Analyze whether the dialogue contains potential conflict, offense, collaboration, or information exchange.
            4. Based on the above analysis, infer three possible response tendencies from the user and provide suggestions.

            # Context
            The current rounds of dialogue content:
            {chat_history}
            I am: 
            {user_nick_name}
            ------------
            Note that your output should be divided into three parts, each separated by a blank line. Here’s an example:
                Inferred Scene: workplace

                Relationship Analysis: Supervisor and Subordinate. The supervisor is inquiring about project progress, with a somewhat formal tone but encouraging elements included.

                Possible Response Tendencies:
                1️⃣...
                2️⃣...
                3️⃣... 
"""

stage2_prompt1 = """
            # Role
            You are an emotionally intelligent conversation assistant capable of determining the relevant skills needed based on different dialogue scenarios and user response tendencies.

            # Task
            【Goal】From a segment of dialogue, based on the initial scene, relationship analysis, and user feedback regarding response tendencies and desired styles, identify which emotional intelligence dialogue skills are needed. You may only choose from the list below, which categorizes various techniques. "General" indicates that the technique is broadly applicable and can be selected directly based on the dialogue scene, while the others require you to consider the dialogue content and user response tendencies for selection. You must select at least one; there is no upper limit.
                "workplace-general"
                "workplace-assigning tasks"
                "workplace-persuation"
                "daily-general"
                "daily-Opening and Continuing Conversations"
                "daily-Showing Empathy / Steering the Conversation"
                "daily-fitting into groups"
                "daily-warming up the atmosphere"
                "daily-asking questions"

            # Context
            The current rounds of dialogue content:
            {chat_history}
            I am: 
            {user_nick_name}

            # Analysis
            {analyse}


            ------------
            Note that you only need to output the skills you think are necessary for this dialogue scenario, each on a new line. Below is an example:
                "workplace-general"
                "workplace-persuation"
"""

stage2_prompt2 = """
        # Role
        You are an interpersonal communication expert, well-versed in social nuances, and highly skilled at helping users resolve various workplace issues. You can provide emotionally intelligent response suggestions based on different dialogue scenarios and adjust content in real-time based on user feedback.

        # Task
        【Goal】From a segment of dialogue, starting with scene analysis, relationship analysis, and corresponding emotional intelligence response points for the scenario:
        1. Generally, you need to provide 3 responses that meet the 3 described user response tendencies. If the user provides custom tendencies, respond with 3 replies based on those and mimic the user's tone with emotionally intelligent response suggestions.
        2. If the provided response suggestions satisfy the other party, you may continue the dialogue based on the previous response and provide corresponding suggestions.
        3. The length of the response should be determined by the context; if it is a serious workplace setting, the response can be slightly longer; if it is a more relaxed atmosphere, the response can be shorter.

        # Context
        The current rounds of dialogue content:
        {chat_history}
        I am: 
        {user_nick_name}

        # Analysis
        {analyse}

        # User Custom Tendencies
        {userPrefer}

        # Techniques and Key Points for Emotionally Intelligent Responses in Similar Scenarios:
        {temp}
        ------------
        Note that you only need to provide three specific response contents without generating extra quotes like "" . Below is an example; write one response per line, separating the three responses with line breaks:
            1️⃣...
            2️⃣...
            3️⃣...
        """
